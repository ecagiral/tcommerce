#{extends 'main.html' /}
#{set title:'Home' /}

<script src="@{'/public/javascripts/jquery.imagesloaded.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/jquery.masonry.min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script>
	$("ul#topNav li:nth-child(1)").addClass('active');
</script>

<div id="productContainer">
#{if items==null || items.size() == 0}
	<div>
		No item found
	</div>
#{/if}
#{list items:items, as:'product'}
    	<div class="productWindow">
		<div class="productCard"
			onclick="window.location='/product/${product.id}'"
			style='cursor: pointer;'>
			<div class="productImg">
				<img src="${product.picture}" alt="foto" />
			</div>

			<div class="productDetail">
				${product.description}
			</div>

		</div>
		<div class="clear"></div>
		<div>
			<p style="text-align: right; margin-right: 10px;">
			    %{view = String.valueOf((int)(Math.random() * 100)) }%
			    %{comment = String.valueOf((int)(Math.random() * 20))}%
				<span class="comment">${view} View</span>
				<span class="comment">&#8226;</span> <span class="comment">${comment}
					Comment</span>
			</p>
		</div>
		<div class="clear"></div>
		<div class="cardUser"
			onclick="window.location='<%=request.getContextPath()+"/user.jsp?user="+product.getAnnouncerId()%>'"
			style='cursor: pointer;'>
			<div>
			<img src="${product.picture}" alt="foto" /> <span class="name">${product.owner.screenName}</span>
			</div>
			%{ like = (int)(Math.random() * 30); }%
			%{ trust = 100 - like}%
			<div>
				<p style="text-align: right; margin-bottom: 1px; padding-bottom: 1px;"><span class="comment">Seller Rating ${trust}%</span></p>
			</div>
			<div class="video-extras-sparkbars" style="margin-bottom: 2px;">
				<div class="video-extras-sparkbar-likes"
					style="width: ${100 - like}%"></div>
				<div class="video-extras-sparkbar-dislikes"
					style="width: ${like}%"></div>
			</div>
		</div>
	</div>
#{/list}
</div>
<div class="clear"></div>
<script type="text/javascript">
	var $container = $('#productContainer');
	$container.imagesLoaded(function() {
		$container.masonry({
			itemSelector : '.productWindow',
			columnWidth : 270
		});
	});
	$(function() {
		  // Setup drop down menu
		  $('.dropdown-toggle').dropdown();
		 
		  // Fix input element click problem
		  $('.dropdown input, .dropdown label').click(function(e) {
		    e.stopPropagation();
		  });
		});
</script>
    #{addProduct user:user/} 
